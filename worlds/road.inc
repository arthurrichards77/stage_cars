# define "road" macro
# sets collisions off
# and grey colour

define road model
(
  color "gray"
  obstacle_return 0
)

# this macro draws a 20m straight length of road

define road_straight road
(
  size [20 6 0.01]
  # add a centre line  
  model (
    size [20 0.4 0.02]
    color "white"
    obstacle_return 0
  )
)

# this one does just a turnout

define road_turnout road
(
  # side road
  size [20 20 0.01]
  block
  (
  points 4
  point[0] [0.35 1]
  point[1] [0.35 0.35]
  point[2] [0.65 0.35]
  point[3] [0.65 1]
  z [0 0.9]
  )
  # chamfer at the turn
  block
  (
  points 4
  point[0] [0.3 0.3]
  point[1] [0.35 0.35]
  point[2] [0.65 0.35]
  point[3] [0.7 0.3]
  z [0 0.9]
  )
  # main road
  block
  (
  points 4
  point[0] [0 0]
  point[1] [1 0]
  point[2] [1 0.3]
  point[3] [0 0.3]
  z [0 0.9]
  )
  # main road centre line
  block
  (
  points 4
  point[0] [0 0.14]
  point[1] [1 0.14]
  point[2] [1 0.16]
  point[3] [0 0.16]
  z [0 1.0]
  color "white"
  )
  # side road centre line
  block
  (
  points 4
  point[0] [0.49 0.3]
  point[1] [0.51 0.3]
  point[2] [0.51 1]
  point[3] [0.49 1]
  z [0 1.0]
  color "white"
  )
)

# auto-generated by make_bends.py
define road_bend road
(
  size [20 20 0.01]
  block
  (
  points 4
  point[0] [0.000000 0.000000]
  point[1] [0.156434 0.012312]
  point[2] [0.109504 0.308618]
  point[3] [0.000000 0.300000]
  z [0 0.9]
  )
  block
  (
  points 4
  point[0] [0.156434 0.012312]
  point[1] [0.309017 0.048943]
  point[2] [0.216312 0.334260]
  point[3] [0.109504 0.308618]
  z [0 0.9]
  )
  block
  (
  points 4
  point[0] [0.309017 0.048943]
  point[1] [0.453990 0.108993]
  point[2] [0.317793 0.376295]
  point[3] [0.216312 0.334260]
  z [0 0.9]
  )
  block
  (
  points 4
  point[0] [0.453990 0.108993]
  point[1] [0.587785 0.190983]
  point[2] [0.411450 0.433688]
  point[3] [0.317793 0.376295]
  z [0 0.9]
  )
  block
  (
  points 4
  point[0] [0.587785 0.190983]
  point[1] [0.707107 0.292893]
  point[2] [0.494975 0.505025]
  point[3] [0.411450 0.433688]
  z [0 0.9]
  )
  block
  (
  points 4
  point[0] [0.707107 0.292893]
  point[1] [0.809017 0.412215]
  point[2] [0.566312 0.588550]
  point[3] [0.494975 0.505025]
  z [0 0.9]
  )
  block
  (
  points 4
  point[0] [0.809017 0.412215]
  point[1] [0.891007 0.546010]
  point[2] [0.623705 0.682207]
  point[3] [0.566312 0.588550]
  z [0 0.9]
  )
  block
  (
  points 4
  point[0] [0.891007 0.546010]
  point[1] [0.951057 0.690983]
  point[2] [0.665740 0.783688]
  point[3] [0.623705 0.682207]
  z [0 0.9]
  )
  block
  (
  points 4
  point[0] [0.951057 0.690983]
  point[1] [0.987688 0.843566]
  point[2] [0.691382 0.890496]
  point[3] [0.665740 0.783688]
  z [0 0.9]
  )
  block
  (
  points 4
  point[0] [0.987688 0.843566]
  point[1] [1.000000 1.000000]
  point[2] [0.700000 1.000000]
  point[3] [0.691382 0.890496]
  z [0 0.9]
  )
  block
  (
  points 4
  point[0] [0.000000 0.140000]
  point[1] [0.134534 0.150588]
  point[2] [0.131405 0.170342]
  point[3] [0.000000 0.160000]
  z [0 1.0]
  color "white"
  )
  block
  (
  points 4
  point[0] [0.134534 0.150588]
  point[1] [0.265755 0.182091]
  point[2] [0.259574 0.201113]
  point[3] [0.131405 0.170342]
  z [0 1.0]
  color "white"
  )
  block
  (
  points 4
  point[0] [0.265755 0.182091]
  point[1] [0.390432 0.233734]
  point[2] [0.381352 0.251555]
  point[3] [0.259574 0.201113]
  z [0 1.0]
  color "white"
  )
  block
  (
  points 4
  point[0] [0.390432 0.233734]
  point[1] [0.505495 0.304245]
  point[2] [0.493740 0.320426]
  point[3] [0.381352 0.251555]
  z [0 1.0]
  color "white"
  )
  block
  (
  points 4
  point[0] [0.505495 0.304245]
  point[1] [0.608112 0.391888]
  point[2] [0.593970 0.406030]
  point[3] [0.493740 0.320426]
  z [0 1.0]
  color "white"
  )
  block
  (
  points 4
  point[0] [0.608112 0.391888]
  point[1] [0.695755 0.494505]
  point[2] [0.679574 0.506260]
  point[3] [0.593970 0.406030]
  z [0 1.0]
  color "white"
  )
  block
  (
  points 4
  point[0] [0.695755 0.494505]
  point[1] [0.766266 0.609568]
  point[2] [0.748445 0.618648]
  point[3] [0.679574 0.506260]
  z [0 1.0]
  color "white"
  )
  block
  (
  points 4
  point[0] [0.766266 0.609568]
  point[1] [0.817909 0.734245]
  point[2] [0.798887 0.740426]
  point[3] [0.748445 0.618648]
  z [0 1.0]
  color "white"
  )
  block
  (
  points 4
  point[0] [0.817909 0.734245]
  point[1] [0.849412 0.865466]
  point[2] [0.829658 0.868595]
  point[3] [0.798887 0.740426]
  z [0 1.0]
  color "white"
  )
  block
  (
  points 4
  point[0] [0.849412 0.865466]
  point[1] [0.860000 1.000000]
  point[2] [0.840000 1.000000]
  point[3] [0.829658 0.868595]
  z [0 1.0]
  color "white"
  )
)
